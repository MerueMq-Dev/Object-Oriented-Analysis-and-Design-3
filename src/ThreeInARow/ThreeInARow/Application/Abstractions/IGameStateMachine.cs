namespace ThreeInARow.Application.Abstractions;

/// <summary>
/// АТД: Машина состояний игры
/// 
/// НАЗНАЧЕНИЕ:
///   Управляет текущим состоянием игры и обеспечивает корректность переходов
///   между состояниями согласно определённым правилам
/// 
/// ЗАПРОСЫ:
///   GetState() : GameState
///     Возвращает текущее состояние игры
///     Постусловие: возвращаемое значение принадлежит множеству GameState
///     
/// КОМАНДЫ:
///   ChangeState(newState: GameState) : bool
///     Выполняет попытку перехода в новое состояние
///     Предусловие: newState является допустимым значением GameState
///     Постусловие: при успешном переходе GetState() возвращает newState
///     Постусловие: при неудачной попытке GetState() возвращает прежнее состояние
///     Постусловие: возвращает true только при допустимом переходе
///     
/// ДОПУСТИМЫЕ ПЕРЕХОДЫ:
///   Menu → Playing, Leaderboard
///   Playing → Finished, Menu
///   Finished → Menu, Leaderboard
///   Leaderboard → Menu
///   
/// ИНВАРИАНТЫ:
///   - Состояние в каждый момент времени является одним из четырёх значений
///   - Переходы осуществляются только согласно графу допустимых переходов
/// </summary>
public interface IGameStateMachine
{
    // Запросы
    GameState GetState();

    // Команды
    bool ChangeState(GameState newState);
}