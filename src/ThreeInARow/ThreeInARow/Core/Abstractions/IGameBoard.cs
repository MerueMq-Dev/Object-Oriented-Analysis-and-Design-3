namespace ThreeInARow.Core.Abstractions;

/// <summary>
/// АТД: Игровое поле
/// 
/// НАЗНАЧЕНИЕ:
///   Представляет игровое поле размером 8×8 с игровыми элементами
///   Обеспечивает операции обмена элементов и обнаружения совпадений
/// 
/// ЗАПРОСЫ:
///   GetElement(x: int, y: int) : GameElement
///     Возвращает элемент, расположенный в позиции (x, y)
///     Предусловие: позиция (x, y) находится в пределах поля
///     Исключение: ArgumentOutOfRangeException при выходе за границы поля
///     
///   IsInside(x: int, y: int) : bool
///     Проверяет принадлежность позиции (x, y) границам поля
///     Постусловие: возвращает true если 0 ≤ x < 8 и 0 ≤ y < 8
///     
///   HasMatch() : bool
///     Проверяет наличие последовательностей из трёх или более одинаковых элементов
///     Постусловие: возвращает true при наличии горизонтальных или вертикальных совпадений
///     
///   GetSize() : int
///     Возвращает размер стороны квадратного поля
///     Постусловие: всегда возвращает значение 8
///     
/// КОМАНДЫ:
///   Swap(x1: int, y1: int, x2: int, y2: int) : bool
///     Выполняет обмен двух элементов
///     Предусловие: обе позиции находятся в пределах поля
///     Предусловие: позиции являются смежными по горизонтали или вертикали
///     Постусловие: при успешном обмене элементы меняются местами, возвращается true
///     Постусловие: при невозможности обмена состояние поля не изменяется, возвращается false
///     
///   RemoveMatches() : int
///     Удаляет обнаруженные совпадения, заменяя их новыми случайными элементами
///     Постусловие: все найденные совпадения заменены новыми элементами
///     Постусловие: возвращает количество удалённых элементов
///     
///   FillEmpty() : void
///     Заполняет незаполненные позиции новыми случайными элементами
///     Постусловие: после выполнения все позиции содержат элементы
///     
/// ИНВАРИАНТЫ:
///   - Размер поля составляет 8×8 позиций
///   - Каждая позиция содержит ровно один элемент
///   - Тип каждого элемента принадлежит множеству ElementType
/// </summary>
public interface IGameBoard
{
    // Запросы
    GameElement GetElement(int x, int y);
    bool IsInside(int x, int y);
    bool HasMatch();
    int GetSize();

    // Команды
    bool Swap(int x1, int y1, int x2, int y2);
    int RemoveMatches();
    void FillEmpty();
}